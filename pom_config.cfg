# POM templates and configurations

# Root POM template
read -r -d '' POM_TEMPLATE_ROOT <<'EOF'
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>${groupId}</groupId>
    <artifactId>${artifactId}</artifactId>
    <version>${version}</version>
    <packaging>pom</packaging>

    <properties>
        <java.version>21</java.version>
        <spring-boot.version>${SPRING_BOOT_VERSION}</spring-boot.version>
        <spring-cloud.version>${SPRING_CLOUD_VERSION}</spring-cloud.version>
        <!-- Additional properties -->
        <sonar.projectKey>${groupId}:${artifactId}</sonar.projectKey>
        <sonar.projectName>${project_name}</sonar.projectName>
        <sonar.projectVersion>${version}</sonar.projectVersion>
        <sonar.sourceEncoding>UTF-8</sonar.sourceEncoding>
    </properties>

    <dependencyManagement>
        <dependencies>
            <!-- Spring Boot dependencies -->
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring-boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>

            <!-- Spring Cloud dependencies -->
            <dependency>
                <groupId>org.springframework.cloud</groupId>
                <artifactId>spring-cloud-dependencies</artifactId>
                <version>${spring-cloud.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>${spring-boot.version}</version>
        <relativePath /> <!-- lookup parent from repository -->
    </parent>

    <!-- Additional configurations and dependencies can be added here -->
    <build>
        <plugins>
            <!-- Plugin configurations -->
        </plugins>
    </build>

    <modules>
$(for module in ${modules}; do echo "        <module>${module}</module>"; done)
    </modules>
</project>
EOF

# Module POM template (for modules that contain sub-modules)
read -r -d '' POM_TEMPLATE_MODULE <<'EOF'
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>${parentGroupId}</groupId>
        <artifactId>${parentArtifactId}</artifactId>
        <version>${parentVersion}</version>
    </parent>

    <artifactId>${artifactId}</artifactId>
    <version>${version}</version>
    <packaging>pom</packaging>

    <!-- Additional configurations and dependencies can be added here -->

    <modules>
$(for module in ${modules}; do echo "        <module>${module}</module>"; done)
    </modules>
</project>
EOF

# Leaf POM template (for modules without sub-modules)
read -r -d '' POM_TEMPLATE_LEAF <<'EOF'
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>${parentGroupId}</groupId>
        <artifactId>${parentArtifactId}</artifactId>
        <version>${parentVersion}</version>
    </parent>

    <artifactId>${artifactId}</artifactId>
    <version>${version}</version>
    <packaging>jar</packaging>

    <!-- Additional configurations and dependencies can be added here -->
</project>
EOF

# Directory structure configuration (for leaf modules)
read -r -d '' DIRECTORY_STRUCTURE <<'EOF'
src/main/java/entity
src/main/java/event
src/main/java/valueobject
src/main/java/service
src/main/java/handler
src/main/java/mapper
EOF

# Modules configuration
# Format: module_path:module_type:module_parent:module_pom_template:module_submodules
# module_type: "module" (contains sub-modules) or "leaf" (no sub-modules)
# module_pom_template: POM_TEMPLATE_MODULE or POM_TEMPLATE_LEAF
# module_submodules: space-separated list of sub-modules

read -r -d '' MODULES_CONFIG <<'EOF'
core:module:${artifactId}:POM_TEMPLATE_MODULE:"domain application shared-kernel"
core/domain:leaf:core:POM_TEMPLATE_LEAF:""
core/application:module:core:POM_TEMPLATE_MODULE:"ports service"
core/application/ports:leaf:application:POM_TEMPLATE_LEAF:""
core/application/service:leaf:application:POM_TEMPLATE_LEAF:""
core/shared-kernel:leaf:core:POM_TEMPLATE_LEAF:""
adapters:module:${artifactId}:POM_TEMPLATE_MODULE:"web messaging persistence client"
adapters/web:leaf:adapters:POM_TEMPLATE_LEAF:""
adapters/messaging:leaf:adapters:POM_TEMPLATE_LEAF:""
adapters/persistence:leaf:adapters:POM_TEMPLATE_LEAF:""
adapters/client:leaf:adapters:POM_TEMPLATE_LEAF:""
container:leaf:${artifactId}:POM_TEMPLATE_LEAF:""
EOF

# Parent modules for the root POM
PARENT_MODULES="core adapters container"

# SonarQube modules
SONAR_MODULES="core adapters container"

